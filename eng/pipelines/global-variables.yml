parameters:
  runtimeFeed: default
  runtimeFeedToken: default

variables:
- name: _TeamName
  value: DotNetCore

- name: _SignType
  value: ''

# # Internal build pools.
- ${{ if ne(variables['System.TeamProject'], 'public') }}:
  - group: DotNet-Diagnostics-SDL-Params
  - template: /eng/common/templates-official/variables/pool-providers.yml@self
  - name: BuildPool
    value: $(DncEngInternalBuildPool)
  - name: WindowsImage
    value: windows.vs2022.amd64
  - name: LinuxImage
    value: Build.Ubuntu.2204.Amd64
  - name: macOSImage
    value: macOS-latest
  - name: sourceBuildTemplate
    value: /eng/common/templates-official/job/source-build.yml@self
  - name: jobTemplate
    value: /eng/common/templates-official/job/job.yml@self
  - ${{ if notin(variables['Build.Reason'], 'PullRequest') }}:
    - name: _SignType
      value: real
# Public build settings
- ${{ else }}:
  - template: /eng/common/templates/variables/pool-providers.yml@self
  - name: BuildPool
    value: $(DncEngPublicBuildPool)
  - name: sourceBuildTemplate
    value: /eng/common/templates/job/source-build.yml@self
  - name: jobTemplate
    value: /eng/common/templates/job/job.yml@self
  - name: WindowsImage
    value: windows.vs2022.amd64.open
  - name: LinuxImage
    value: Build.Ubuntu.2204.Amd64.Open
  - name: macOSImage
    value: macOS-latest

# Custom feed and token
- ${{ if eq(parameters.runtimeFeed, 'custom') }}:
  - name: RuntimeFeedUrl
    value: $(DotnetRuntimeDownloadFeed)
- ${{ if eq(parameters.runtimeFeedToken, 'custom') }}:
  - name: RuntimeFeedBase64SasToken
    value: $(DotnetRuntimeDownloadBase64SasToken)
- ${{ if eq(parameters.runtimeFeed, 'dotnetclimsrc-feed') }}:
  - name: RuntimeFeedUrl
    value: https://dotnetclimsrc.blob.core.windows.net/dotnet
- ${{ if eq(parameters.runtimeFeedToken, 'dotnetclimsrc-sas-token-base64') }}:
  - name: RuntimeFeedBase64SasToken
    value: $(dotnetclimsrc-read-sas-token-base64)

# Helix queue configuration
# Public (open) queues for PR validation and public project builds
- ${{ if or(eq(variables['System.TeamProject'], 'public'), in(variables['Build.Reason'], 'PullRequest')) }}:
  - name: HelixQueuesWindows_x64
    value: Windows.10.Amd64.Open
  - name: HelixQueuesWindows_x86
    value: Windows.10.Amd64.Open
  - name: HelixQueuesWindows_arm64
    value: Windows.11.Arm64.Open
  - name: HelixQueuesLinux_x64
    value: Ubuntu.2204.Amd64.Open
  - name: HelixQueuesLinux_arm64
    value: Ubuntu.2204.Arm64.Open
  - name: HelixQueuesLinux_musl_x64
    value: Ubuntu.2204.Amd64.Open
  - name: HelixQueuesLinux_musl_arm64
    value: Ubuntu.2204.Arm64.Open
  - name: HelixQueuesMacOS_x64
    value: OSX.1200.Amd64.Open
  - name: HelixQueuesMacOS_arm64
    value: OSX.1200.Arm64.Open

# Internal queues for official builds (non-PR, non-public)
- ${{ if and(ne(variables['System.TeamProject'], 'public'), notin(variables['Build.Reason'], 'PullRequest')) }}:
  - name: HelixQueuesWindows_x64
    value: windows.amd64.server2022
  - name: HelixQueuesWindows_x86
    value: windows.amd64.server2022
  - name: HelixQueuesWindows_arm64
    value: windows.11.arm64
  - name: HelixQueuesLinux_x64
    value: Ubuntu.2204.Amd64
  - name: HelixQueuesLinux_arm64
    value: Ubuntu.2204.Arm64
  - name: HelixQueuesLinux_musl_x64
    value: Ubuntu.2204.Amd64
  - name: HelixQueuesLinux_musl_arm64
    value: Ubuntu.2204.Arm64
  - name: HelixQueuesMacOS_x64
    value: OSX.1200.Amd64
  - name: HelixQueuesMacOS_arm64
    value: OSX.1200.Arm64
