{
	"name": "Diagnostics - Contribute",
	"build": {
		"dockerfile": "Dockerfile"
	},
    "hostRequirements": {
		"cpus": 4,
		"memory": "8gb",
		"storage": "64gb"
	},
    "features": {
		"ghcr.io/devcontainers/features/github-cli:1": {},
		"ghcr.io/devcontainers/features/docker-in-docker": {}
    },
    "customizations": {
        "codespaces": {
            "extensions": [
                "ms-dotnettools.csdevkit",
                "GitHub.copilot",
                "GitHub.copilot-chat"
            ],
            "settings": {
                "remote.autoForwardPorts": true,
				"remote.autoForwardPortsSource": "hybrid",
				"remote.otherPortsAttributes": {
					"onAutoForward": "ignore"
				},
                "dotnet.defaultSolution": "build.sln"
            }
        }
    },
    "postStartCommand": "${containerWorkspaceFolder}/dotnet.sh --info",
    "capAdd": [ "SYS_PTRACE" ],

	// Add the locally installed dotnet to the path to ensure that it is activated
	// This allows developers to just use 'dotnet build' on the command-line, and the local dotnet version will be used.
	// Add the global tools dir to the PATH so that globally installed tools will work
	"remoteEnv": {
		"PATH": "${containerWorkspaceFolder}/.dotnet:${containerEnv:PATH}"
	},

	// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
    // This one is defined by common-utils in the dotnet devcontainer base image.
	"remoteUser": "vscode"
}
