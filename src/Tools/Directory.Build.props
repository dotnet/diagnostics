<Project>
  <Import Project="$(MSBuildThisFileDirectory)..\Directory.Build.props"/>

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <IsShipping>true</IsShipping>
    <GenerateDocumentationFile>false</GenerateDocumentationFile>
    <!-- Tools always ship with stable versions to allow for seamless CLI upgrade experiences. -->
    <PreReleaseVersionLabel />
  </PropertyGroup>

  <Choose>
    <When Condition="'$(BundleTools)' == 'true'">
      <PropertyGroup>
        <RuntimeIdentifiers>win-x64;win-x86;win-arm64;linux-x64;linux-musl-x64;linux-musl-arm64;linux-arm64;linux-arm;linux-musl-arm;osx-x64;osx-arm64</RuntimeIdentifiers>
        <IncludeAllContentForSelfExtract>true</IncludeAllContentForSelfExtract>
        <SelfContained>false</SelfContained>
        <PublishDir>$(BundledToolsPath)$(Configuration)\$(RuntimeIdentifier)\</PublishDir>
        <PublishSingleFile>true</PublishSingleFile>
        <PublishTrimmed>$(SelfContained)</PublishTrimmed>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <IsPackable>true</IsPackable>
        <PackAsTool>true</PackAsTool>
        <PackAsToolShimRuntimeIdentifiers>win-x64;win-x86;osx-x64</PackAsToolShimRuntimeIdentifiers>
        <PackagedShimOutputRootDirectory>$(OutputPath)</PackagedShimOutputRootDirectory>
      </PropertyGroup>
    </Otherwise>
  </Choose>

  <ItemGroup>
    <None Include="$(RepoRoot)/THIRD-PARTY-NOTICES.TXT"
          Pack="true"
          Visible="false"
          PackagePath="THIRD-PARTY-NOTICES.txt" />
  </ItemGroup>
</Project>
